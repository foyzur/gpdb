-- start_ignore
-- end_ignore
\c testdb_mpp16059 testrole_mpp16059
You are now connected to database "testdb_mpp16059" as user "testrole_mpp16059".
DROP TABLE IF EXISTS T CASCADE;
psql:/data/soedoj/tincrepo/private/ECHO/main/resource_management/memory_quota/resource_queues/output/dynamic_memory.sql:6: NOTICE:  table "t" does not exist, skipping
DROP TABLE
CREATE TABLE T (i1 int, i2 int, i3 int, i4 int, i5 int, i6 int, i7 int, i8 int) distributed by (i1);
CREATE TABLE
INSERT INTO T SELECT i, i, i, i, i, i, i, i % 10000 from generate_series(0,999999) i;
INSERT 0 1000000
CREATE TABLE T2 (i1 int, i2 int, i3 int, i4 int, i5 int, i6 int, i7 int, i8 int) distributed by (i1);
CREATE TABLE
DROP FUNCTION IF EXISTS DoInsert();
psql:/data/soedoj/tincrepo/private/ECHO/main/resource_management/memory_quota/resource_queues/output/dynamic_memory.sql:12: NOTICE:  function doinsert() does not exist, skipping
DROP FUNCTION
CREATE OR REPLACE FUNCTION DoInsert() RETURNS void AS
$BODY$
BEGIN
    EXECUTE 'INSERT INTO T2 SELECT T1.* FROM T AS T1, T AS T2 WHERE T1.i1 = T2.i2';
END
$BODY$
LANGUAGE 'plpgsql' ;
CREATE FUNCTION
-- start_ignore
SET gp_workfile_type_hashjoin=buffile;
SET
SET work_mem='2MB';
psql:/data/soedoj/tincrepo/private/ECHO/main/resource_management/memory_quota/resource_queues/output/dynamic_memory.sql:22: WARNING:  "work_mem": setting is deprecated, and may be removed in a future release.
SET
-- end_ignore
SET gp_workfile_limit_per_query='1MB';
SET
SELECT DoInsert();
 doinsert 
----------
 
(1 row)

-- start_ignore
drop function DoInsert() cascade;
DROP FUNCTION
drop table t;
DROP TABLE
drop table t2;
DROP TABLE
-- end_ignore
