-- start_ignore
-- end_ignore
set gp_workfile_type_hashjoin=buffile; 
SET
--SET gp_workfile_caching_loglevel="LOG"; 
set statement_mem=2048; 
SET
set gp_autostats_mode = none;
SET
drop table if exists t1_created; 
psql:/Users/gcaragea/dev/tincrepo/main/resource_management/spillfiles/space_accounting/output/test_insert_cancel.sql:11: NOTICE:  table "t1_created" does not exist, skipping
DROP TABLE
create table t1_created (i1 int, i2 int, i3 int, i4 int, i5 int, i6 int, i7 int, i8 int); 
psql:/Users/gcaragea/dev/tincrepo/main/resource_management/spillfiles/space_accounting/output/test_insert_cancel.sql:12: NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
CREATE TABLE
begin; 
BEGIN
insert into t1_created
SELECT t1.* FROM hj_skew AS t1, hj_skew AS t2 WHERE t1.i1=t2.i2;
psql:/Users/gcaragea/dev/tincrepo/main/resource_management/spillfiles/space_accounting/output/test_insert_cancel.sql:17: ERROR:  canceling MPP operation  (seg0 gcaragea-mbp.local:40050 pid=98124)
rollback; 
ROLLBACK
-- check used segspace after test
reset statement_mem; 
RESET
select * from mpp_23802_gp_workfile_segspace; 
 segid | size 
-------+------
     1 |    0
     0 |    0
    -1 |    0
(3 rows)

--start_ignore
drop table if exists t1_created; 
DROP TABLE
--end_ignore
